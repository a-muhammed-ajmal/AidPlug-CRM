import{r as s,a as S,b as C,j as e}from"./index-NvUe1ZN8.js";import{P as E}from"./PasswordStrengthIndicator-CuMA_Um-.js";import{K as k}from"./key-round-BBzQ7HMs.js";import{E as w,a as h}from"./eye-CNI_WSyx.js";function q(){const[t,p]=s.useState(""),[n,b]=s.useState(""),[r,g]=s.useState(!1),[o,f]=s.useState(!1),[i,c]=s.useState(""),[u,m]=s.useState(!1),[y,j]=s.useState(!1),{updateUserPassword:N,user:x,loading:l}=S(),d=C();s.useEffect(()=>{!l&&!x&&d("/login",{state:{message:"Invalid or expired password reset link."}})},[x,l,d]);const v=async a=>{a.preventDefault(),c(""),m(!0);try{await N(t),d("/login",{state:{message:"Your password has been reset. Please sign in."}})}catch(P){c(P.message||"Failed to update password")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-blue-600 text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password"})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:i}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",value:t,onChange:a=>p(a.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!r),className:"absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-gray-700","aria-label":r?"Hide password":"Show password",children:r?e.jsx(w,{className:"h-5 w-5"}):e.jsx(h,{className:"h-5 w-5"})})]}),e.jsx(E,{password:t,onValidationChange:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",value:n,onChange:a=>b(a.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!o),className:"absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-gray-700","aria-label":o?"Hide password":"Show password",children:o?e.jsx(w,{className:"h-5 w-5"}):e.jsx(h,{className:"h-5 w-5"})})]})]}),e.jsx("button",{type:"submit",disabled:u||l||!y||t!==n,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Updating...":"Update Password"})]})]})})}export{q as default};
