import{d as v,a as A,x as E,e as N,y as O,z as U,A as I,s as T,r as i,j as e,S as j,X as w}from"./index-BK3vLjjw.js";import{C as g}from"./chevron-right-BhugUiZz.js";import{M as Q}from"./mail-DYQVG9aa.js";import{S as W}from"./shield-BAU_yDAp.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=v("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=v("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);function G(){const{user:s}=A(),t=E(),{addNotification:a}=N(),n=["userPreferences",s==null?void 0:s.id],{data:l,isLoading:x,error:h}=O({queryKey:n,queryFn:()=>I.getPreferences(s.id),enabled:!!s}),o=U({mutationFn:r=>I.updatePreferences(s.id,r),onSuccess:r=>{t.setQueryData(n,r),a("Settings Updated","Your preferences have been saved successfully.")},onError:r=>{a("Update Failed",r.message||"Could not save your preferences.")}});return{preferences:l,isLoading:x,error:h,updatePreferences:o}}const L={get:async s=>{const{data:t,error:a}=await T.from("sales_cycles").select("*").eq("user_id",s).order("created_at",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw a;if(t)return t;const n=new Date;n.setDate(1);const l=new Date(n.getFullYear(),n.getMonth()+1,0);return{id:"",user_id:s,start_date:n.toISOString().split("T")[0],end_date:l.toISOString().split("T")[0],created_at:new Date().toISOString(),updated_at:null}},update:async(s,t)=>{const{data:a,error:n}=await T.from("sales_cycles").upsert({user_id:s,start_date:t.start_date||new Date().toISOString().split("T")[0],end_date:t.end_date||new Date().toISOString().split("T")[0],...t}).select().single();if(n)throw n;return a}};function K(){const{user:s}=A(),t=E(),{addNotification:a}=N(),n=["salesCycle",s==null?void 0:s.id],{data:l,isLoading:x,error:h}=O({queryKey:n,queryFn:()=>L.get(s.id),enabled:!!s}),o=U({mutationFn:r=>L.update(s.id,r),onSuccess:r=>{t.setQueryData(n,r),a("Sales Cycle Updated","Your sales cycle dates have been saved.")},onError:r=>{a("Update Failed",r.message||"Could not save the sales cycle.")}});return{salesCycle:l,isLoading:x,error:h,updateSalesCycle:o}}const V=({enabled:s,onChange:t})=>e.jsx("button",{onClick:t,className:`w-12 h-6 rounded-full relative transition-colors ${s?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${s?"transform translate-x-6":"transform translate-x-0.5"}`})}),c=({icon:s,label:t,children:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-700",children:t})]}),a]}),$=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Help Center"}),e.jsx("button",{onClick:s,className:"p-2 -mr-2 rounded-full hover:bg-gray-100",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Getting Started"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Adding Leads:"}),' Go to Leads page and click "Add Lead" button']}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Managing Clients:"})," Use the Clients page to view and edit client information"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Deal Pipeline:"})," Track your sales deals in the Deals section"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"How do I backup my data?"}),e.jsx("p",{children:"Your data is automatically synced to our secure servers."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Can I export my leads?"}),e.jsx("p",{children:"Data export functionality is coming in a future update."})]})]})]})]})]})}),X=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Privacy Policy"}),e.jsx("button",{onClick:s,className:"p-2 -mr-2 rounded-full hover:bg-gray-100",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Effective Date:"})," October 2024"]}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Information We Collect"}),e.jsx("p",{children:"We collect information you provide directly to us, such as when you create an account, use our services, or contact us for support."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"How We Use Your Information"}),e.jsx("p",{children:"We use the information we collect to provide, maintain, and improve our services, process transactions, and communicate with you."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Data Security"}),e.jsx("p",{children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Contact Us"}),e.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at privacy@aidplug.com"})]})]})}),J=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Terms of Service"}),e.jsx("button",{onClick:s,className:"p-2 -mr-2 rounded-full hover:bg-gray-100",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Effective Date:"})," October 2024"]}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Acceptance of Terms"}),e.jsx("p",{children:"By accessing and using AidPlug CRM, you accept and agree to be bound by the terms and provision of this agreement."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Use License"}),e.jsx("p",{children:"Permission is granted to temporarily use AidPlug CRM for personal and business use, subject to restrictions stated in these terms."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Disclaimer"}),e.jsx("p",{children:"The materials on AidPlug CRM are provided on an 'as is' basis. AidPlug makes no warranties, expressed or implied, and hereby disclaims all other warranties."}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mt-4",children:"Limitations"}),e.jsx("p",{children:"In no event shall AidPlug be liable for any damages arising out of the use or inability to use AidPlug CRM."})]})]})});function ne(){const{setTitle:s}=N();i.useEffect(()=>{s("Settings")},[s]);const{preferences:t,updatePreferences:a,isLoading:n}=G(),{salesCycle:l,updateSalesCycle:x,isLoading:h}=K(),[o,r]=i.useState({start_date:"",end_date:""}),[f,S]=i.useState(null),[C,b]=i.useState("idle"),[F,_]=i.useState(!1),[H,D]=i.useState(!1),[q,P]=i.useState(!1);i.useEffect(()=>{l&&r({start_date:l.start_date||"",end_date:l.end_date||""})},[l]);const R=m=>{if(t){const d=!t[m];a.mutate({[m]:d}),d?(b("syncing"),setTimeout(()=>b("synced"),2e3)):b("idle")}},k=m=>{const{name:d,value:y}=m.target,u={...o,[d]:y};if(r(u),u.start_date&&u.end_date){const z=new Date(u.start_date);new Date(u.end_date)<z?S("End date cannot be earlier than the start date."):S(null)}},M=m=>{if(!f){const{name:d,value:y}=m.target;l&&l[d]!==y&&x.mutate({[d]:y})}};return n||h?e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{className:"h-24 rounded-xl"}),e.jsx(j,{className:"h-40 rounded-xl"}),e.jsx(j,{className:"h-40 rounded-xl"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Preferences"})}),e.jsx("div",{className:"p-4 space-y-4",children:e.jsx(c,{icon:B,label:"Mobile Sync",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-500 w-20 text-right",children:t!=null&&t.mobile_sync?C==="syncing"?"Syncing...":C==="synced"?"Synced":"Enabled":"Disabled"}),e.jsx(V,{enabled:(t==null?void 0:t.mobile_sync)??!0,onChange:()=>R("mobile_sync")})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Sales Cycle"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",id:"start_date",name:"start_date",value:o.start_date,onChange:k,onBlur:M,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",id:"end_date",name:"end_date",value:o.end_date,onChange:k,onBlur:M,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]}),f&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:f})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Support & Help"})}),e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>_(!0),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(c,{icon:Y,label:"Help Center",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})}),e.jsx("button",{onClick:()=>window.location.href="mailto:support@aidplug.com",className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(c,{icon:Q,label:"Contact Support",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})}),e.jsx("button",{onClick:()=>D(!0),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(c,{icon:W,label:"Privacy Policy",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})}),e.jsx("button",{onClick:()=>P(!0),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(c,{icon:p,label:"Terms of Service",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"App Information"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(c,{icon:p,label:"Version",children:e.jsx("span",{className:"font-medium text-gray-800 text-sm",children:"1.0.0"})}),e.jsx(c,{icon:p,label:"Last Updated",children:e.jsx("span",{className:"font-medium text-gray-800 text-sm",children:"Oct 01, 2024"})}),e.jsx(c,{icon:p,label:"Data Sync",children:e.jsxs("span",{className:"font-medium text-green-600 flex items-center text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Connected"]})})]})]}),F&&e.jsx($,{onClose:()=>_(!1)}),H&&e.jsx(X,{onClose:()=>D(!1)}),q&&e.jsx(J,{onClose:()=>P(!1)})]})}export{ne as default};
