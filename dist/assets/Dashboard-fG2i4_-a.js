import{d as v,j as e,e as w,r as A,b as D,f as T,S as m,B as h,C as y,L as f,U as b,g as M,h as S,i as u}from"./index-XESJNA6v.js";import{u as E}from"./useSalesCycle-DcGvlJ8x.js";import{C as B}from"./clock-DaW7saYn.js";import{P as L}from"./plus-Dfe9gStt.js";import{A as U,S as Y}from"./star-HmgaytCb.js";import{C as $}from"./calendar-BI42gCrQ.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=v("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=v("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function j({icon:o,title:l,subtitle:r,colorClass:n,onClick:i}){return e.jsxs("button",{onClick:i,className:"flex items-center p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:shadow-sm transition-all duration-200 active:scale-95 text-left w-full",children:[e.jsx("div",{className:`w-10 h-10 ${n} rounded-lg flex items-center justify-center mr-3 flex-shrink-0`,children:o}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:r})]})]})}const N=({title:o,value:l,color:r,icon:n})=>e.jsxs("div",{className:"rounded-lg shadow-sm overflow-hidden bg-white flex flex-col",children:[e.jsxs("div",{className:`${r} text-white p-3 relative h-20 flex items-center justify-center`,children:[e.jsx("div",{className:"absolute -right-1 -bottom-1 opacity-20 text-white",children:n}),e.jsx("p",{className:"text-3xl font-bold",children:l})]}),e.jsx("div",{className:"p-3 flex-grow flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-700 font-medium leading-tight text-center",children:o})})]}),P=()=>{const o=D(),{tasks:l}=M(),n=l.filter(i=>i.status==="pending").slice(0,5);return e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-purple-600"}),"Things to Get Done"]}),l.length>5&&e.jsx("button",{onClick:()=>o("/tasks"),className:"text-sm font-medium text-blue-600 hover:underline",children:"See all"})]}),n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500",children:`Due: ${new Date(i.due_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}`})]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${i.priority==="urgent"?"bg-red-100 text-red-800":"bg-gray-200 text-gray-700"}`,children:i.priority})]},i.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(y,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"All tasks completed!"})]})]})},R=()=>{const{clients:o}=S(),l=[],r=new Date;r.setHours(0,0,0,0);const n=new Date;n.setDate(r.getDate()+7),o.forEach(s=>{if(s.dob){const c=new Date(s.dob);c.setFullYear(r.getFullYear()),c>=r&&c<=n&&l.push({id:`b-${s.id}`,type:"Birthday",date:c,clientName:s.full_name,years:null})}if(s.client_since){const c=new Date(s.client_since),g=r.getFullYear()-c.getFullYear();c.setFullYear(r.getFullYear()),c>=r&&c<=n&&g>0&&l.push({id:`a-${s.id}`,type:"Anniversary",date:c,clientName:s.full_name,years:g})}});const i=l.sort((s,c)=>s.date.getTime()-c.date.getTime());return e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 mr-2 text-orange-600"}),"Upcoming Events"]}),i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${s.type==="Birthday"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:s.type==="Birthday"?e.jsx(F,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:s.type==="Anniversary"?`${s.years} Year Anniversary`:"Birthday"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:s.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},s.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx($,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming events."})]})]})};function Q(){const{setTitle:o}=w();A.useEffect(()=>{o("Dashboard")},[o]);const l=D(),{activities:r}=w(),{deals:n,isLoading:i}=T(),{salesCycle:s}=E(),c=n.filter(t=>!["completed","unsuccessful"].includes(t.stage||"")).length,g=s&&s.end_date?(()=>{const t=new Date,x=new Date(s.end_date);t.setHours(0,0,0,0),x.setHours(0,0,0,0);const d=x.getTime()-t.getTime(),a=Math.ceil(d/(1e3*60*60*24));return Math.max(0,a)})():0,k=n.filter(t=>t.stage==="completed").length,_=t=>{const x=new Date(t),d=Math.floor((new Date().getTime()-x.getTime())/1e3);let a=d/31536e3;return a>1?Math.floor(a)+"y ago":(a=d/2592e3,a>1?Math.floor(a)+"mo ago":(a=d/86400,a>1?Math.floor(a)+"d ago":(a=d/3600,a>1?Math.floor(a)+"h ago":(a=d/60,a>1?Math.floor(a)+"m ago":d<10?"just now":Math.floor(d)+"s ago"))))},C=t=>{const x={lead_add:e.jsx(u,{className:"w-4 h-4 text-white"}),lead_update:e.jsx(u,{className:"w-4 h-4 text-white"}),lead_delete:e.jsx(u,{className:"w-4 h-4 text-white"}),lead_convert:e.jsx(u,{className:"w-4 h-4 text-white"}),client_add:e.jsx(b,{className:"w-4 h-4 text-white"}),deal_add:e.jsx(h,{className:"w-4 h-4 text-white"}),deal_stage_update:e.jsx(h,{className:"w-4 h-4 text-white"}),deal_delete:e.jsx(h,{className:"w-4 h-4 text-white"}),task_add:e.jsx(f,{className:"w-4 h-4 text-white"}),task_complete:e.jsx(y,{className:"w-4 h-4 text-white"})},d={lead_add:"bg-green-500",lead_update:"bg-blue-500",lead_delete:"bg-red-500",lead_convert:"bg-purple-500",client_add:"bg-indigo-500",deal_add:"bg-green-500",deal_stage_update:"bg-blue-500",deal_delete:"bg-red-500",task_add:"bg-yellow-500",task_complete:"bg-green-500"};return e.jsx("div",{className:`w-8 h-8 ${d[t]||"bg-gray-500"} rounded-full flex items-center justify-center flex-shrink-0`,children:x[t]})};return i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(m,{className:"h-28 rounded-lg"}),e.jsx(m,{className:"h-28 rounded-lg"}),e.jsx(m,{className:"h-28 rounded-lg"})]}),e.jsx(m,{className:"h-48 rounded-xl"}),e.jsx(m,{className:"h-40 rounded-xl"}),e.jsx(m,{className:"h-40 rounded-xl"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(N,{title:"Deals Processing",value:c,color:"bg-red-500",icon:e.jsx(h,{size:56})}),e.jsx(N,{title:"Days Remaining",value:g,color:"bg-orange-500",icon:e.jsx(B,{size:56})}),e.jsx(N,{title:"Done Successfully",value:k,color:"bg-green-500",icon:e.jsx(y,{size:56})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-blue-600"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(j,{onClick:()=>l("/leads",{state:{showAddModal:!0}}),icon:e.jsx(L,{className:"w-5 h-5 text-white"}),title:"New Lead",subtitle:"ADD PROSPECT",colorClass:"bg-blue-500"}),e.jsx(j,{onClick:()=>l("/tasks"),icon:e.jsx(f,{className:"w-5 h-5 text-white"}),title:"View Tasks",subtitle:"CHECK TASKS",colorClass:"bg-green-500"}),e.jsx(j,{onClick:()=>l("/clients",{state:{showAddModal:!0}}),icon:e.jsx(b,{className:"w-5 h-5 text-white"}),title:"Add Client",subtitle:"NEW ACCOUNT",colorClass:"bg-purple-500"}),e.jsx(j,{onClick:()=>l("/deals",{state:{showAddModal:!0}}),icon:e.jsx(h,{className:"w-5 h-5 text-white"}),title:"New Deal",subtitle:"ADD JOURNEY",colorClass:"bg-orange-500"})]})]}),e.jsx(P,{}),e.jsx(R,{}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-green-600"}),"Recent Activity"]}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[C(t.type),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.message})}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:_(t.timestamp)})]},t.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(p,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your recent activities will show up here."})]})]})]})}export{Q as default};
