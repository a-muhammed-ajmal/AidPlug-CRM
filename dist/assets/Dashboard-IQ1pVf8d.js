import{d as v,j as e,e as w,r as C,b as k,f as A,S as x,B as m,C as y,L as j,U as b,g as M,h as T,i as g}from"./index-B3-V5Lho.js";import{C as S}from"./clock-SV7AXSBT.js";import{P as E}from"./plus-e3SUYZvU.js";import{A as B,S as L}from"./star-8uev3GD7.js";import{C as U}from"./calendar-CyQu4sLg.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=v("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=v("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function u({icon:d,title:t,subtitle:a,colorClass:c,onClick:l}){return e.jsxs("button",{onClick:l,className:"flex items-center p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:shadow-sm transition-all duration-200 active:scale-95 text-left w-full",children:[e.jsx("div",{className:`w-10 h-10 ${c} rounded-lg flex items-center justify-center mr-3 flex-shrink-0`,children:d}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:t}),e.jsx("p",{className:"text-xs text-gray-500",children:a})]})]})}const N=({title:d,value:t,color:a,icon:c})=>e.jsxs("div",{className:"rounded-lg shadow-sm overflow-hidden bg-white flex flex-col",children:[e.jsxs("div",{className:`${a} text-white p-3 relative h-20 flex items-center justify-center`,children:[e.jsx("div",{className:"absolute -right-1 -bottom-1 opacity-20 text-white",children:c}),e.jsx("p",{className:"text-3xl font-bold",children:t})]}),e.jsx("div",{className:"p-3 flex-grow flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-700 font-medium leading-tight text-center",children:d})})]}),$=()=>{const d=k(),{tasks:t}=M(),c=t.filter(l=>l.status==="pending").slice(0,5);return e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-purple-600"}),"Things to Get Done"]}),t.length>5&&e.jsx("button",{onClick:()=>d("/tasks"),className:"text-sm font-medium text-blue-600 hover:underline",children:"See all"})]}),c.length>0?e.jsx("div",{className:"space-y-3",children:c.map(l=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:l.title}),e.jsx("p",{className:"text-xs text-gray-500",children:`Due: ${new Date(l.due_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})}`})]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${l.priority==="urgent"?"bg-red-100 text-red-800":"bg-gray-200 text-gray-700"}`,children:l.priority})]},l.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(y,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"All tasks completed!"})]})]})},F=()=>{const{clients:d}=T(),t=[],a=new Date;a.setHours(0,0,0,0);const c=new Date;c.setDate(a.getDate()+7),d.forEach(s=>{if(s.dob){const r=new Date(s.dob);r.setFullYear(a.getFullYear()),r>=a&&r<=c&&t.push({id:`b-${s.id}`,type:"Birthday",date:r,clientName:s.full_name,years:null})}if(s.client_since){const r=new Date(s.client_since),h=a.getFullYear()-r.getFullYear();r.setFullYear(a.getFullYear()),r>=a&&r<=c&&h>0&&t.push({id:`a-${s.id}`,type:"Anniversary",date:r,clientName:s.full_name,years:h})}});const l=t.sort((s,r)=>s.date.getTime()-r.date.getTime());return e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-orange-600"}),"Upcoming Events"]}),l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${s.type==="Birthday"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:s.type==="Birthday"?e.jsx(Y,{className:"w-4 h-4"}):e.jsx(L,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:s.type==="Anniversary"?`${s.years} Year Anniversary`:"Birthday"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:s.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},s.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(U,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming events."})]})]})};function H(){const{setTitle:d}=w();C.useEffect(()=>{d("Dashboard")},[d]);const t=k(),{activities:a}=w(),{deals:c,isLoading:l}=A(),s=c.filter(n=>!["completed","unsuccessful"].includes(n.stage||"")).length,r=15,h=c.filter(n=>n.stage==="completed").length,D=n=>{const p=new Date(n),o=Math.floor((new Date().getTime()-p.getTime())/1e3);let i=o/31536e3;return i>1?Math.floor(i)+"y ago":(i=o/2592e3,i>1?Math.floor(i)+"mo ago":(i=o/86400,i>1?Math.floor(i)+"d ago":(i=o/3600,i>1?Math.floor(i)+"h ago":(i=o/60,i>1?Math.floor(i)+"m ago":o<10?"just now":Math.floor(o)+"s ago"))))},_=n=>{const p={lead_add:e.jsx(g,{className:"w-4 h-4 text-white"}),lead_update:e.jsx(g,{className:"w-4 h-4 text-white"}),lead_delete:e.jsx(g,{className:"w-4 h-4 text-white"}),lead_convert:e.jsx(g,{className:"w-4 h-4 text-white"}),client_add:e.jsx(b,{className:"w-4 h-4 text-white"}),deal_add:e.jsx(m,{className:"w-4 h-4 text-white"}),deal_stage_update:e.jsx(m,{className:"w-4 h-4 text-white"}),deal_delete:e.jsx(m,{className:"w-4 h-4 text-white"}),task_add:e.jsx(j,{className:"w-4 h-4 text-white"}),task_complete:e.jsx(y,{className:"w-4 h-4 text-white"})},o={lead_add:"bg-green-500",lead_update:"bg-blue-500",lead_delete:"bg-red-500",lead_convert:"bg-purple-500",client_add:"bg-indigo-500",deal_add:"bg-green-500",deal_stage_update:"bg-blue-500",deal_delete:"bg-red-500",task_add:"bg-yellow-500",task_complete:"bg-green-500"};return e.jsx("div",{className:`w-8 h-8 ${o[n]||"bg-gray-500"} rounded-full flex items-center justify-center flex-shrink-0`,children:p[n]})};return l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(x,{className:"h-28 rounded-lg"}),e.jsx(x,{className:"h-28 rounded-lg"}),e.jsx(x,{className:"h-28 rounded-lg"})]}),e.jsx(x,{className:"h-48 rounded-xl"}),e.jsx(x,{className:"h-40 rounded-xl"}),e.jsx(x,{className:"h-40 rounded-xl"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(N,{title:"Deals Processing",value:s,color:"bg-red-500",icon:e.jsx(m,{size:56})}),e.jsx(N,{title:"Days Remaining",value:r,color:"bg-orange-500",icon:e.jsx(S,{size:56})}),e.jsx(N,{title:"Done Successfully",value:h,color:"bg-green-500",icon:e.jsx(y,{size:56})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-blue-600"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(u,{onClick:()=>t("/leads",{state:{showAddModal:!0}}),icon:e.jsx(E,{className:"w-5 h-5 text-white"}),title:"New Lead",subtitle:"ADD PROSPECT",colorClass:"bg-blue-500"}),e.jsx(u,{onClick:()=>t("/tasks"),icon:e.jsx(j,{className:"w-5 h-5 text-white"}),title:"View Tasks",subtitle:"CHECK TASKS",colorClass:"bg-green-500"}),e.jsx(u,{onClick:()=>t("/clients",{state:{showAddModal:!0}}),icon:e.jsx(b,{className:"w-5 h-5 text-white"}),title:"Add Client",subtitle:"NEW ACCOUNT",colorClass:"bg-purple-500"}),e.jsx(u,{onClick:()=>t("/deals",{state:{showAddModal:!0}}),icon:e.jsx(m,{className:"w-5 h-5 text-white"}),title:"New Deal",subtitle:"ADD JOURNEY",colorClass:"bg-orange-500"})]})]}),e.jsx($,{}),e.jsx(F,{}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-green-600"}),"Recent Activity"]}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(n=>e.jsxs("div",{className:"flex items-center space-x-3",children:[_(n.type),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.message})}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:D(n.timestamp)})]},n.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(f,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your recent activities will show up here."})]})]})]})}export{H as default};
